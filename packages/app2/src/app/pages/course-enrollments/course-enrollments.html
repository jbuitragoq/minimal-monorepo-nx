<div class="course-enrollments-container">
    <div class="page-header">
        <h2>üìä Inscripciones por Curso</h2>
        <p>Consulta qu√© estudiantes est√°n inscritos en cada curso</p>
    </div>

    <!-- Selector de curso -->
    <div class="course-selector">
        <label for="courseSelect">Selecciona un curso:</label>
        <select id="courseSelect" [(ngModel)]="selectedCourseId" (ngModelChange)="onCourseChange()"
            [disabled]="loadingCourses">
            <option value="">Selecciona un curso</option>
            @for (course of courses; track course.id) {
            <option [value]="course.id">
                {{ course.title }} - {{ course.teacher }}
            </option>
            }
        </select>
    </div>

    <!-- Informaci√≥n del curso seleccionado -->
    @if (selectedCourse) {
    <div class="course-info">
        <h3>{{ selectedCourse.title }}</h3>
        <p><strong>Profesor:</strong> {{ selectedCourse.teacher }}</p>
        <p><strong>Descripci√≥n:</strong> {{ selectedCourse.description }}</p>
        <p><strong>Total de estudiantes inscritos:</strong> {{ enrollments.length }}</p>
    </div>
    }

    <!-- Tabla de inscripciones -->
    @if (selectedCourseId) {
    <div class="enrollments-table">
        @if (!loadingEnrollments && !error) {
        <lib-table [data]="enrollments" [columns]="tableColumns"
            noDataMessage="No hay estudiantes inscritos en este curso a√∫n.">
        </lib-table>
        }

        @if (loadingEnrollments) {
        <div class="loading">
            <p>Cargando inscripciones...</p>
        </div>
        }

        @if (error) {
        <div class="error">
            <p>‚ùå Error: {{ error }}</p>
            <lib-button (click)="loadEnrollments()">Reintentar</lib-button>
        </div>
        }
    </div>
    }

    <!-- Mensaje cuando no hay curso seleccionado -->
    @if (!selectedCourseId && !loadingCourses) {
    <div class="no-selection">
        <p>üëÜ Selecciona un curso para ver las inscripciones</p>
    </div>
    }
</div>